/* Flash algorithm for LPC55xx IAP 608kB Flash
 *
 * DAPLink Interface Firmware
 * Copyright (c) 2009-2022 Arm Limited, All Rights Reserved
 * SPDX-License-Identifier: Apache-2.0
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// Generated from 'LPC55XX_640.FLM'
// Originating from 'NXP.LPC55S69_DFP.19.0.0.pack'
static const uint32_t LPC55XX_640_flash_prog_blob[] = {
    0xE00ABE00, 
    0xf240b580, 0xf2c00004, 0xf6420000, 0xf84961e0, 0xf2401000, 0xf2c52000, 0x21000000, 0x1080f8c0,
    0x1084f8c0, 0x1180f8c0, 0x71fbf647, 0xf6406001, 0x21ff6004, 0x0000f2c5, 0x01def2cc, 0xf04f6001,
    0x210240a0, 0xf2407001, 0xf2c0000c, 0x44480000, 0xf862f000, 0xbf182800, 0xbd802001, 0x47702000,
    0xf240b580, 0xf2c0000c, 0xf64d0000, 0xf2460200, 0x4448636c, 0x0209f2c0, 0xf6c62100, 0xf0003365,
    0x2800f871, 0x2001bf18, 0xbf00bd80, 0xf020b580, 0xf2404170, 0xf2c0000c, 0xf2460000, 0x4448636c,
    0x3365f6c6, 0x7200f44f, 0xf85cf000, 0xbf182800, 0xbd802001, 0x460bb580, 0x4170f020, 0x000cf240,
    0x0000f2c0, 0xf5b34448, 0xbf987f00, 0x7300f44f, 0xf870f000, 0xbf182800, 0xbd802001, 0x460cb5b0,
    0xf0204605, 0x46114070, 0xf0004622, 0x2800f9ed, 0x4425bf08, 0xbdb04628, 0x460ab580, 0x4170f020,
    0x000cf240, 0x0000f2c0, 0xf0004448, 0x2800f87b, 0x2001bf18, 0x0000bd80, 0x0cf6f241, 0x3c00f2c1,
    0x100af8dc, 0xf240b181, 0xf2c00308, 0x22000300, 0x2003f849, 0x2000f89c, 0x3a036849, 0xf282fab2,
    0xf8490952, 0x47082003, 0x4086f240, 0x0000f2c0, 0x4193f240, 0x0100f2c0, 0x44794478, 0xf000226e,
    0xbf00f973, 0x0c08f240, 0x0c00f2c0, 0xc00cf859, 0x0f00f1bc, 0xf241d00b, 0xf2c11c00, 0xf8dc3c00,
    0xf1bcc000, 0xd0070f00, 0xc008f8dc, 0xf2444760, 0xf2c11c3b, 0x47603c00, 0x4036f240, 0x0000f2c0,
    0x4143f240, 0x0100f2c0, 0x44794478, 0xf000227f, 0xbf00f94b, 0x0c08f240, 0x0c00f2c0, 0xc00cf859,
    0x0f00f1bc, 0xf241d00b, 0xf2c11c00, 0xf8dc3c00, 0xf1bcc000, 0xd0070f00, 0xc00cf8dc, 0xf2444760,
    0xf2c11c9d, 0x47603c00, 0x30e6f240, 0x0000f2c0, 0x31f3f240, 0x0100f2c0, 0x44794478, 0xf000228f,
    0xbf00f923, 0x1300f241, 0x3300f2c1, 0xb10b681b, 0x4718691b, 0x30baf240, 0x0000f2c0, 0x31c7f240,
    0x0100f2c0, 0x44794478, 0xf0002297, 0xbf00f90d, 0x0c08f240, 0x0c00f2c0, 0xc00cf859, 0x0f00f1bc,
    0xf241d00b, 0xf2c11c00, 0xf8dc3c00, 0xf1bcc000, 0xd0070f00, 0xc014f8dc, 0xf2444760, 0xf2c12c7d,
    0x47603c00, 0x306af240, 0x0000f2c0, 0x3177f240, 0x0100f2c0, 0x44794478, 0xf00022ab, 0xbf00f8e5,
    0x1300f241, 0x3300f2c1, 0xb10b681b, 0x4718699b, 0x303ef240, 0x0000f2c0, 0x314bf240, 0x0100f2c0,
    0x44794478, 0xf00022b4, 0xbf00f8cf, 0x1100f241, 0x3100f2c1, 0xb1096809, 0x470869c9, 0x3012f240,
    0x0000f2c0, 0x311ff240, 0x0100f2c0, 0x44794478, 0xf00022be, 0xbf00f8b9, 0x1100f241, 0x3100f2c1,
    0xb1096809, 0x47086a09, 0x20e6f240, 0x0000f2c0, 0x21f3f240, 0x0100f2c0, 0x44794478, 0xf00022c5,
    0xbf00f8a3, 0x1300f241, 0x3300f2c1, 0xb10b681b, 0x47186a5b, 0x20baf240, 0x0000f2c0, 0x21c7f240,
    0x0100f2c0, 0x44794478, 0xf00022cc, 0xbf00f88d, 0x1c00f241, 0x3c00f2c1, 0xc000f8dc, 0x0f00f1bc,
    0xf8dcd002, 0x4760c02c, 0x2086f240, 0x0000f2c0, 0x2193f240, 0x0100f2c0, 0x44794478, 0xf00022d3,
    0xbf00f873, 0x1200f241, 0x3200f2c1, 0xb10a6812, 0x47106b12, 0x205af240, 0x0000f2c0, 0x2167f240,
    0x0100f2c0, 0x44794478, 0xf00022da, 0xbf00f85d, 0x1200f241, 0x3200f2c1, 0xb10a6812, 0x47106b52,
    0x202ef240, 0x0000f2c0, 0x213bf240, 0x0100f2c0, 0x44794478, 0xf00022e1, 0xbf00f847, 0x1300f241,
    0x3300f2c1, 0xb10b681b, 0x47186b9b, 0x2002f240, 0x0000f2c0, 0x210ff240, 0x0100f2c0, 0x44794478,
    0xf00022e8, 0xbf00f831, 0x1200f241, 0x3200f2c1, 0xb10a6812, 0x47106a92, 0x10d6f240, 0x0000f2c0,
    0x11e3f240, 0x0100f2c0, 0x44794478, 0xf00022ef, 0xbf00f81b, 0x1c00f241, 0x3c00f2c1, 0xc000f8dc,
    0x0f00f1bc, 0xf8dcd002, 0x4760c040, 0x10a2f240, 0x0000f2c0, 0x11aff240, 0x0100f2c0, 0x44794478,
    0xf00022f6, 0x0000f801, 0x4605b50e, 0x460e4614, 0xf000a013, 0x4628f870, 0xf86df000, 0xf000a016,
    0x4630f86a, 0xf867f000, 0xf000a015, 0x2100f864, 0x100bf88d, 0xf10d210a, 0xf88d000a, 0xe008100a,
    0xf2f1fb94, 0x4212fb01, 0xf4f1fb94, 0xf8003230, 0x2c002d01, 0xf000dcf4, 0xf000f84e, 0x0000f841,
    0x202a2a2a, 0x65737361, 0x6f697472, 0x6166206e, 0x64656c69, 0x0000203a, 0x6966202c, 0x0020656c,
    0x696c202c, 0x0020656e, 0x0301ea40, 0x079bb510, 0x2a04d10f, 0xc810d30d, 0x1f12c908, 0xd0f8429c,
    0xba19ba20, 0xd9014288, 0xbd102001, 0x30fff04f, 0xb11abd10, 0xd00307d3, 0xe0071c52, 0xbd102000,
    0x3b01f810, 0x4b01f811, 0xd1071b1b, 0x3b01f810, 0x4b01f811, 0xd1011b1b, 0xd1f11e92, 0xbd104618,
    0x2000b510, 0xf81ef000, 0x8000f3af, 0x4010e8bd, 0xf0002001, 0xb510b811, 0xe0024604, 0xf0001c64,
    0x7820f804, 0xd1f92800, 0xb508bd10, 0xf88d4669, 0x20030000, 0xbd08beab, 0x20184901, 0xe7febeab,
    0x00020026, 0xf000b510, 0xe8bdf80b, 0xf0004010, 0x4770b801, 0xd0012800, 0xbfeef7ff, 0x00004770,
    0x2100b510, 0xf000a002, 0x2001f813, 0x0000bd10, 0x41474953, 0x3a545242, 0x6e624120, 0x616d726f,
    0x6574206c, 0x6e696d72, 0x6f697461, 0x0000006e, 0x4605b570, 0x200a460c, 0x1c6de000, 0xffc5f7ff,
    0x7828b135, 0xd1f82800, 0x1c64e002, 0xffbdf7ff, 0x7820b114, 0xd1f82800, 0x4070e8bd, 0xf7ff200a,
    0x4c46bfb4, 0x5f485341, 0x5f495041, 0x45455254, 0x70616900, 0x73662f31, 0x61695f6c, 0x632e3170,
    0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 0x00000000,
    0x00000000, 0x00000000, 0x00000000
};

// Start address of flash
static const uint32_t flash_start = 0x00000000;
// Size of flash
static const uint32_t flash_size = 0x00098000;

/**
* List of start and size for each size of flash sector - even indexes are start, odd are size
* The size will apply to all sectors between the listed address and the next address
* in the list.
* The last pair in the list will have sectors starting at that address and ending
* at address flash_start + flash_size.
*/
static const sector_info_t sectors_info[] = {
    {0x00000000, 0x00008000},
};

static const program_target_t flash = {
    0x20000005, // Init
    0x20000061, // UnInit
    0x20000065, // EraseChip
    0x20000091, // EraseSector
    0x200000b9, // ProgramPage
    0x200000e1, // Verify

    // BKPT : start of blob + 1
    // RSB  : blob start + header + rw data offset
    // RSP  : stack pointer
    {
        0x20000001,
        0x20000608,
        0x20000900
    },

    0x20000000 + 0x00000A00,  // mem buffer location
    0x20000000,               // location to write prog_blob in target RAM
    sizeof(LPC55XX_640_flash_prog_blob),   // prog_blob size
    LPC55XX_640_flash_prog_blob,           // address of prog_blob
    0x00000200       // ram_to_flash_bytes_to_be_written
};
